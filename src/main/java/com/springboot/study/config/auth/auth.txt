Spring Security는 막강한 Authentication (인증)과 Authorization (인가) 기능을 가진 프레임 워크이다.
인터셉트, 필터 기반의 보안기능을 구현하는 것 보다, Spring Security를 통해 구현하는 것을 적극적으로 권장하고 있다.
Spring의 대부분 프로젝트들(Mvc, Data, Batch)처럼 확장성을 고려한 프레임워크다보니, 다양한 요구사항을 손쉽게 추가하고 변경할 수 있다.

Spring OAuth2
    - 많은 서비스에서 로그인기능을 따로 구현하기보다 소셜로그인(구글, 네이버 등)을 사용한다. 왜?
        - 직접 구현할 경우 배보다 배꼽이 커지는 경우가 많기 때문이다.
            - 로그인 시 보안
            - 비밀번호 찾기, 변경
            - 회원정보 변경
            - 회원가입 시 이메일 혹은 전화번호 인증
    - Boot 1.5와 2.0의 OAuth2 연동방법이 크게 변경되었다만, 설정방법에 큰 차이가 없다.
        - spring-security-oauth2-autoconfigure 라이브러리 덕분이다.
            - 이걸 사용할 경우, 1.5에서 쓰던 설정을 2에서 그대로 사용가능하다.
            - 기존에 안전하게 작동하던 코드를 사용하는 것이 아무래도 더 확실하다
            - 하지만, 여기서는 부트2 방식인 Spring Security Oauth2 Client 라이브러리로 진행한다.
                - 1.5에서 사용하던 spring-security-oauth는 유지상태로 결정, 버그수정정도만 하고, 신규기능은 2에만 지원하겠다고 선언
                - SpringBoot 용 라이브러리(starter) 출시
                - 기존 사용방식은 확장포인트가 적절하게 오픈되어있지 않아 직접 상속하거나 오버라이딩 해야 했다.
            - Boot 2 방식을 검색하고 싶다면, oauth2 라이브러리를 썼는지? application.properties 정보에 url 명시를 안해도 됬는지? 를 확인하면 된다.
                - 1.5에서는 url주소를 모두 명시해야된다.
                - 2에서는 client 인증정보만 입력하면 된다. (1.5에서 직접 입력하던 값들이 enum으로 대체되었다.)
                - CommonOAuth2Provider라는 enum이 추가되어 구글, 깃허브, 페북, 옥타의 기본 설정값은 모두 여기서 제공한다.
                    - 이외에 다른 소셜로그인 (네이버, 카카오 등) 을 추가한다면 직접 다 추가해주어야 한다.

이제 구글 로그인 서비스를 사용해보자. -> 끝나고 한번 더 둘러보자.
    - 구글 서비스에 신규서비스를 생성하고, 여기서 인증정보를 발급받아 로그인과 소셜서비스 기능을 사용할 수 있다.
    - https://console.cloud.google.com
    - 프로젝트 선택 - 새 프로젝트 - 이름은 원하는 이름 - API 및 서비스 - 사용자 인증정보 - 사용자 인증 정보 만들기 - OAuth 클라이언트 ID
    - 동의화면구성 - 범위는 email, profile, openid
        - 지원이메일 적는 란에는 보통 서비스의 help 이메일 주소를 사용한다.
        - 범위는 위 3개가 기본값이다.
    - 사용자 인증정보 - OAuth 클라이언트 ID 만들기
        - 웹 애플리캐이션
        - 이름 설정
        - 승인된 리디렉션 URI -> http://localhost:8080/login/oauth2/code/google
            - 서비스에서 파라미터로 인증정보 줄 때, 인증 성공시 구글에서 리다이렉트 해줄 URL
            - Boot2의 Security는 기본적으로 {도메인}/login/oauth2/code/{소셜서비스코드}로 리다이렉트 URL을 지원하고 있따.
            - 사용자가 별도로 리다이렉트 URL을 위한 Controller를 만들 필요가 없다. Security에서 이미 구현해놨다.
            - 아직 개발단계니 localhost로만 등록한다. (AWS에 배포하면 추가로 주소를 추가한다.)
            - 만들어진 클라이언트 정보를 클릭하면 ID와 시크릿코드를 볼 수 있다.
    - application-oauth 등록
        - application-oauth.properties에 등록한다.



